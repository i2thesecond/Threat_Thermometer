<!DOCTYPE html> 
<html lang="en" dir="ltr"> 
  
<head> 
	<meta charset="utf-8"> 
	<title>Threat Thermometer</title> 
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> 

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 


	<body>
		<div class="d-flex justify-content-center">
			  <div id="container" style="width: 50%;">
    <canvas id="result-chart" data-url="{% url 'result-chart' term %}"></canvas>
    
    <canvas id="frequency-chart" data-url="{% url 'frequency-chart' term %}"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  
  <script>
	  // Bar Graph 
$(function() {

    // variable to change the y-axis labels to own qualitative measurements
    var yLabels = {
		0: 'Very Low Risk',
        1: 'Lower Risk',
        2: 'Average Risk',
        3: 'Higher Risk',
        4: 'Very High Risk'
    };

    var $resultChart = $("#result-chart");
    $.ajax({
        url: $resultChart.data("url"),
        success: function(data) {

            var ctx = $resultChart[0].getContext("2d");

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'Risk Alert',
                        backgroundColor: 'blue',
                        data: data.data
                    }]
                },
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Threat Thermometer'
                    },
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true,
                    min: 0,
                    max: 4,
                    callback: function(value, index, values) {
                        return yLabels[value];
                    }
                }
            }]
        },

                }
            });

        }
    });

});

  </script>

<script>
//Line Graph
$(function() {

    var $frequencyChart = $("#frequency-chart");
    $.ajax({
        url: $frequencyChart.data("url"),
        success: function(data) {

            var ctx = $frequencyChart[0].getContext("2d");

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'Frequency of Term',
                        backgroundColor: 'blue',
                        data: data.data
                    }]
                },
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Threat Thermometer'
                    },
                }
            });

        }
    });

});



</script>

		</div>
		
	</body>
</html>
